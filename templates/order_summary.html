{% extends "home.html" %}

{% load staticfiles %}

{% block title %}Cart{% endblock %}

{% block home_css %}

	<!--{% include 'bootstrap_css.html' %}-->
	<link rel = "stylesheet" type = "text/css" href = "{% static 'css/cart.css' %}">
	
{% endblock %}

{% block right_panel %}
	
	<div class = "content-panel-container">
		<div class = "content-panel">
			<p class = "content-title">Cart</p>
			<table>
				<tbody>
					<tr>
						<th>Product</th>
						<th>Vendor</th>
						<th>Price</th>
						<th>Quantity</th>
						<th>Total Price</th>
						<th></th>
					</tr>
					
					{% get_active_order_items user as order_items %}
					{% for product in order_items.all %}
						<tr>
							<td>{{ product.item.title }}</td>
							<td>{{ product.item.vendor.title }}</td>
							<td>{{ product.item.price }}</td>
							<td>
								<a href="{% url 'core:remove-single-item-from-cart' product.item.slug %}">
									<img class = "tiny-button" src = "{% static 'img/icons/minus-30.png' %}">
								</a>
								{{ product.quantity }}
								<a href="{% url 'core:add-to-cart' product.item.slug %}">
									<img class = "tiny-button" src = "{% static 'img/icons/plus-30.png' %}">
								</a>
							</td>
							<td>
								{% if order_item.item.discount_price %}
									{{ product.get_total_discount_item_price }}
								{% else %}
									{{ product.get_total_item_price }}
								{% endif %}
							</td>
							<td>
								<a href="{% url 'core:remove-from-cart' product.item.slug %}">
									<img class = "tiny-button remove" src = "{% static 'img/icons/trash-24.png' %}">
								</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
			{% get_cart_count user as cart_count %}
			{% if cart_count == 0 %}
				<div class = "form-end">
					<a href = "{% url 'core:store' %}">
						<input id = "continue-shopping" class = "form-submit" type = "submit" value = "Continue Shopping">
					</a>
				</div>
			{% else %}
				<div class = "form-end">
					<a href = "{% url 'core:checkout' %}">
						<input class = "form-submit" type = "submit" value = "Checkout">
					</a>
				</div>
			{% endif %}
		</div>
	</div>
	
	<!--<div class = "content-panel-container">
		<div class="table-responsive text-nowrap">
			<h2>Order Summary</h2>
			<table class="table">
				<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col">Item title</th>
					<th scope="col">Vendor</th>
					<th scope="col">Price</th>
					<th scope="col">Quantity</th>
					<th scope="col">Total Item Price</th>
				</tr>
				</thead>
				<tbody>
				{% for order_item in object.items.all %}
				<tr>
					<th scope="row">{{ forloop.counter }}</th>
					<td>{{ order_item.item.title }}</td>
					<td>{{ order_item.item.owner }}</td>
					<td>{{ order_item.item.price }}</td>
					<td>
						<a href="{% url 'core:remove-single-item-from-cart' order_item.item.slug %}"><i class="fas fa-minus mr-2"></i></a>
						{{ order_item.quantity }}
						<a href="{% url 'core:add-to-cart' order_item.item.slug %}"><i class="fas fa-plus ml-2"></i></a>
					</td>
					<td>
					{% if order_item.item.discount_price %}
						${{ order_item.get_total_discount_item_price }}
						<span class="badge badge-primary">Saving ${{ order_item.get_amount_saved }}</span>
					{% else %}
						${{ order_item.get_total_item_price }}
					{% endif %}
					<a style='color: red;' href="{% url 'core:remove-from-cart' order_item.item.slug %}">
						<i class="fas fa-trash float-right"></i>
					</a>
					</td>
				</tr>
				{% empty %}
				<tr>
					<td colspan='5'>Your cart is empty</td>
				</tr>
				<tr>
					<td colspan="5">
					<a class='btn btn-primary float-right' href='/'>Continue shopping</a>
					</td>
				</tr>
				{% endfor %}
				{% if object.coupon %}
				<tr>
					<td colspan="4"><b>Coupon</b></td>
					<td><b>-${{ object.coupon.amount }}</b></td>
				</tr>
				{% endif %}
				{% if object.get_total %}
				<tr>
					<td colspan="5"><b>Order Total</b></td>
					<td><b >${{ object.get_total }}</b></td>
				</tr>
				<tr>
					<td colspan="6">
					<a class='btn btn-warning float-right ml-2' href='/checkout/'>Proceed to checkout</a>
					<a class='btn btn-primary float-right' href='/'>Continue shopping</a>
					</td>
				</tr>
				{% endif %}
				</tbody>
			</table>
		</div>
	</div>-->

{% endblock %}